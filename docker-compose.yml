version: '3.5'
services:
	ugramapp:
		container_name: ugramapp
		build:
			context: ./app
			dockerfile: Dockerfile
		volumes:
			- './app:/usr/src/app'
			- '/usr/src/app/node_modules'
		ports:
			- '3000:3000'
		environment:
			- NODE_ENV=development
	ugramapi:
		container_name: ugramapi
		build:
			context: './api'
			dockerfile: Dockerfile
		volumes:
			- './api:/usr/src/api'
			- '/usr/src/api/node_modules'
		ports:
			- '8080:8080'
		links:
			- mongo
		depends_on:
			- mongo
		environment:
			- NODE_ENV=development
	mongo:
		container_name: mongo
		image: mongo
		volumes:
			- './mongodb/data:/data/db'
		ports:
			- '27017:27017'